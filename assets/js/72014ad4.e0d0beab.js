"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6149],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),m=c(n),u=a,h=m["".concat(s,".").concat(u)]||m[u]||d[u]||o;return n?i.createElement(h,l(l({ref:t},p),{},{components:n})):i.createElement(h,l({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,l[1]=r;for(var c=2;c<o;c++)l[c]=n[c];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9962:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return r},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var i=n(3117),a=n(102),o=(n(7294),n(3905)),l=["components"],r={id:"collections",title:"Collections",sidebar_label:"Collections"},s=void 0,c={unversionedId:"collections/collections",id:"collections/collections",title:"Collections",description:"In FireCMS, collections represent groups of entities. Collections need to be",source:"@site/docs/collections/collections.md",sourceDirName:"collections",slug:"/collections/",permalink:"/docs/collections/",tags:[],version:"current",frontMatter:{id:"collections",title:"Collections",sidebar_label:"Collections"},sidebar:"docsSidebar",previous:{title:"Custom schema views",permalink:"/docs/entities/custom_schema_views"},next:{title:"Saving and deleting callbacks",permalink:"/docs/collections/saving_callbacks"}},p=[{value:"Sample collection",id:"sample-collection",children:[],level:3},{value:"Additional columns",id:"additional-columns",children:[{value:"Example",id:"example",children:[],level:4},{value:"Advanced example",id:"advanced-example",children:[],level:4}],level:3},{value:"Subcollections",id:"subcollections",children:[],level:3},{value:"Filters",id:"filters",children:[],level:3}],d={toc:p};function m(e){var t=e.components,n=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In FireCMS, ",(0,o.kt)("strong",{parentName:"p"},"collections")," represent groups of entities. Collections need to be\nassociated with an entity schema. You can find collections\nat the ",(0,o.kt)("strong",{parentName:"p"},"top level")," of the navigation tree (the entries displayed in the home\npage and the navigation drawer), or as ",(0,o.kt)("strong",{parentName:"p"},"subcollections")),(0,o.kt)("p",null,"Once you have defined at least one entity schema, you can include it in a\n",(0,o.kt)("strong",{parentName:"p"},"collection"),". "),(0,o.kt)("p",null,"You can find collection views as the first level of navigation in\nthe main menu, or as subcollections inside other collections, following the\nFirestore data schema."),(0,o.kt)("p",null,"Check the full API reference\nin ",(0,o.kt)("a",{parentName:"p",href:"../api/interfaces/entitycollection"},"Entity collections")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"name")," The plural name of the view. E.g. 'products'.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"path")," Relative Firestore path of this view to its parent. If this\nview is in the root the path, it is equal to the absolute one. This path also\ndetermines the URL in FireCMS.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"subcollections")," Following the Firestore document and collection schema, you\ncan add subcollections to your entity in the same way you define the root\ncollections.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"defaultSize")," Default size of the rendered collection.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"group")," Optional field used to group top level navigation entries under a\nnavigation view. If you set this value in a subcollection, it has no effect.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"description")," Optional description of this view. You can use Markdown.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"properties")," Properties displayed in this collection. If this prop is not\nset, every property is displayed.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"excludedProperties")," Properties that should ",(0,o.kt)("strong",{parentName:"p"},"not")," get displayed in the\ncollection view. All the other properties from the entity are displayed. It\nhas no effect if the ",(0,o.kt)("inlineCode",{parentName:"p"},"properties")," value is set.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"filterCombinations")," If you need to filter/sort by multiple properties in this\ncollection, you can define the supported filter combinations here.\nIn the case of Firestore, you need to create special indexes in the console to\nsupport filtering/sorting by more than one property. You can then\nspecify here the indexes created.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"initialFilter")," Initial filters applied to this collection.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"initialSort")," Default sort applied to this collection. It takes tuples in the\nshape ",(0,o.kt)("inlineCode",{parentName:"p"},'["property_name", "asc"]')," or ",(0,o.kt)("inlineCode",{parentName:"p"},'["property_name", "desc"]'))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"extraActions")," Builder for rendering additional components such as buttons in\nthe collection toolbar. The builder takes an object with\nprops ",(0,o.kt)("inlineCode",{parentName:"p"},"entityCollection"),"  and ",(0,o.kt)("inlineCode",{parentName:"p"},"selectedEntities")," if any are set by the end\nuser.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"pagination")," If enabled, content is loaded in batches. If ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," all entities\nin the collection are loaded. You can specify a number to specify the\npagination size (50 by default)\nDefaults to ",(0,o.kt)("inlineCode",{parentName:"p"},"true"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"additionalColumns")," You can add additional columns to the collection view by\nimplementing an additional column delegate.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"textSearchEnabled")," Flag to indicate if a search bar should be displayed on top of\nthe collection table.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"permissions")," You can specify an object with boolean permissions with the\nshape ",(0,o.kt)("inlineCode",{parentName:"p"},"{edit:boolean; create:boolean; delete:boolean}")," to indicate the actions\nthe user can perform. You can also pass a ",(0,o.kt)("a",{parentName:"p",href:"../api/types/permissionsbuilder"},(0,o.kt)("inlineCode",{parentName:"a"},"PermissionsBuilder")),"\nto customize the permissions based on user or entity.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"inlineEditing")," Can the elements in this collection be edited inline in the\ncollection view. If this flag is set to false but ",(0,o.kt)("inlineCode",{parentName:"p"},"permissions.edit")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),"\n, entities can still be edited in the side panel.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"exportable")," Should the data in this collection view include an export button.\nYou can also set an ",(0,o.kt)("a",{parentName:"p",href:"../api/interfaces/exportconfig"},(0,o.kt)("inlineCode",{parentName:"a"},"ExportConfig")),"\nconfiguration object to customize the export and add additional values.\nDefaults to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")))),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In the examples you might see references to the type ",(0,o.kt)("inlineCode",{parentName:"p"},"Product"),"\n(which defines the model) or the schema ",(0,o.kt)("inlineCode",{parentName:"p"},"productSchema"),", as declared in\nthe ",(0,o.kt)("a",{parentName:"p",href:"/docs/entities/entity_schemas"},"entity schemas section")))),(0,o.kt)("h3",{id:"sample-collection"},"Sample collection"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},'import { buildCollection } from "dist/index";\n\nconst productsCollection = buildCollection<Product>({\n    path: "products",\n    schema: productSchema,\n    name: "Products",\n    group: "Main",\n    description: "List of the products currently sold in our shop",\n    textSearchEnabled: true,\n    // additionalColumns: [productAdditionalColumn], // Example below\n    filterCombinations: [{ price: "desc", available: "desc" }],\n    permissions: ({ user, authController }) => ({\n        edit: true,\n        create: true,\n        delete: false\n    }),\n    excludedProperties: ["related_products"]\n});\n\n')),(0,o.kt)("h3",{id:"additional-columns"},"Additional columns"),(0,o.kt)("p",null,"If you would like to include a column that does not map directly to a property,\nyou can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"additionalColumns")," field, providing a\n",(0,o.kt)("inlineCode",{parentName:"p"},"AdditionalColumnDelegate"),", which includes an id, a title, and a builder that\nreceives the corresponding entity."),(0,o.kt)("p",null,"In the builder you can return any React Component."),(0,o.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If your additional column depends on the value of another property of the entity\nyou can define the ",(0,o.kt)("inlineCode",{parentName:"p"},"dependencies")," prop as an array of property keys so that\nthe data is always updated.\nThis will trigger a rerender whenever there is a change in any of the specified\nproperty values."))),(0,o.kt)("h4",{id:"example"},"Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},'import {\n    buildSchema,\n    buildCollection,\n    AdditionalColumnDelegate\n} from "@camberi/firecms";\n\ntype User = { name:string}\n\nexport const fullNameAdditionalColumn: AdditionalColumnDelegate<User> = {\n        id: "full_name",\n        title: "Full Name",\n        builder: ({ entity }) => {\n            let values = entity.values;\n            return typeof values.name === "string" ? values.name.toUpperCase() : "No name provided";\n        },\n        dependencies: ["name"]\n    };\n\nconst usersCollection = buildCollection<User>({\n    path: "users",\n    schema: buildSchema<User>({\n        name: "User",\n        properties: {\n            name: { dataType: "string", title: "Name" }\n        }\n    }),\n    name: "Users",\n    additionalColumns: [\n        fullNameAdditionalColumn\n    ]\n});\n')),(0,o.kt)("h4",{id:"advanced-example"},"Advanced example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},'import {\n  buildCollection,\n  AdditionalColumnDelegate,\n  AsyncPreviewComponent\n} from "@camberi/firecms";\n\nexport const productAdditionalColumn: AdditionalColumnDelegate<Product> = {\n  id: "spanish_title",\n  title: "Spanish title",\n  builder: ({ entity, context }) =>\n          <AsyncPreviewComponent builder={\n            context.dataSource.fetchEntity({\n              path: entity.path,\n              entityId: entity.id,\n              schema: localeSchema\n            }).then((entity) => entity.values.name)\n          }/>\n};\n')),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("inlineCode",{parentName:"p"},"AsyncPreviewComponent")," is a utility component provided by FireCMS that\nallows you to render the result of an async computation (such as fetching data\nfrom a subcollection, like in this case). It will display a skeleton loading\nindicator in the meantime."))),(0,o.kt)("h3",{id:"subcollections"},"Subcollections"),(0,o.kt)("p",null,'Subcollections are collections of entities that are found under another entity.\nFor example, you can have a collection named "translations" under the entity\n"Article". You just need to use the same format as for defining your collection\nusing the field ',(0,o.kt)("inlineCode",{parentName:"p"},"subcollections"),"."),(0,o.kt)("p",null,"Subcollections are easily accessible from the side view while editing an entity."),(0,o.kt)("h3",{id:"filters"},"Filters"),(0,o.kt)("p",null,"Filtering is enabled by default for string, numbers, booleans, timestamps and\narrays. A dropdown is included in every column of the collection where\napplicable."),(0,o.kt)("p",null,"Since Firestore has limited querying capabilities, each time to apply a filter\nor new sort, the previous sort/filter combination gets reset by default (unless\nfiltering, sorting by the same property)."),(0,o.kt)("p",null,"If you need to enable filtering/sorting by more than one property at a time, you\ncan specify the filters that you have enabled in your Firestore configuration.\nIn order to do so, just pass the indexes configuration to your collection:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},'import { buildCollection } from "@camberi/firecms";\n\nconst productsCollection = buildCollection<Product>({\n    path: "products",\n    schema: productSchema,\n    name: "Products",\n    indexes: [\n        {\n            price: "asc",\n            available: "desc"\n        }\n    ]\n});\n')))}m.isMDXComponent=!0}}]);