"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1536],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return d}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=a.createContext({}),l=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=l(e.components);return a.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=l(t),d=r,f=m["".concat(u,".").concat(d)]||m[d]||p[d]||i;return t?a.createElement(f,o(o({ref:n},c),{},{components:t})):a.createElement(f,o({ref:n},c))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=m;var s={};for(var u in n)hasOwnProperty.call(n,u)&&(s[u]=n[u]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=t[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3832:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return u},metadata:function(){return l},toc:function(){return c},default:function(){return m}});var a=t(3117),r=t(102),i=(t(7294),t(3905)),o=["components"],s={id:"custom_cms_app",title:"Custom CMSApp",sidebar_label:"Custom CMSApp"},u=void 0,l={unversionedId:"custom_cms_app",id:"custom_cms_app",title:"Custom CMSApp",description:"FireCMS was originally developed to create Firebase/Firestore-based CMS apps",source:"@site/docs/custom_cms_app.md",sourceDirName:".",slug:"/custom_cms_app",permalink:"/docs/custom_cms_app",tags:[],version:"current",frontMatter:{id:"custom_cms_app",title:"Custom CMSApp",sidebar_label:"Custom CMSApp"},sidebar:"docsSidebar",previous:{title:"Building a blog",permalink:"/docs/recipes/building_a_blog"},next:{title:"Migrating from alpha versions",permalink:"/docs/migrating_from_alpha_versions"}},c=[{value:"Example custom app",id:"example-custom-app",children:[],level:3}],p={toc:c};function m(e){var n=e.components,t=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"FireCMS was originally developed to create Firebase/Firestore-based CMS apps\nwith very little effort. We offer sensible defaults and multiple customization\noptions and callbacks."),(0,i.kt)("p",null,"But there are a few situations where you may want to have more control and build\nyour app using the same components that we use internally."),(0,i.kt)("p",null,"In the process of having a cleaner code, all the code related to Firebase has\nbeen isolated into 3 components, one for authentication (auth delegate), one\nfor the data source and one for storage. These components are abstracted away\nbehind their respective interfaces. This means you can replace any of those\nservices with your custom implementation!"),(0,i.kt)("p",null,"For this reason we expose many of the components used internally, so you can\nuse them in your app and combine them with your code"),(0,i.kt)("p",null,"Some top-level components that you will find useful (same ones as used\nby ",(0,i.kt)("inlineCode",{parentName:"p"},"FirebaseCMSApp"),"):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"api/functions/firecms"},(0,i.kt)("inlineCode",{parentName:"a"},"FireCMS"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"api/functions/scaffold"},(0,i.kt)("inlineCode",{parentName:"a"},"Scaffold"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"api/functions/navigationroutes"},(0,i.kt)("inlineCode",{parentName:"a"},"NavigationRoutes"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"api/functions/sideentitydialogs"},(0,i.kt)("inlineCode",{parentName:"a"},"SideEntityDialogs"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"api/functions/useinitialisefirebase"},(0,i.kt)("inlineCode",{parentName:"a"},"useInitialiseFirebase"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"api/functions/usefirebaseauthdelegate"},(0,i.kt)("inlineCode",{parentName:"a"},"useFirebaseAuthDelegate"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"api/functions/usefirebasestoragesource"},(0,i.kt)("inlineCode",{parentName:"a"},"useFirebaseStorageSource"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"api/functions/usefirestoredatasource"},(0,i.kt)("inlineCode",{parentName:"a"},"useFirestoreDataSource")))),(0,i.kt)("p",null,"You will also be responsible to initialise your MUI5 theme and your react-router\n",(0,i.kt)("inlineCode",{parentName:"p"},"Router")),(0,i.kt)("p",null,"You can see an example\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Camberi/firecms/blob/master/example/src/CustomCMSApp.tsx"},"here")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"How did it go?")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This feature has been added in version 1.0.0.\nIf you have been using FireCMS with a custom backend, we would love to hear your feedback\neither in ",(0,i.kt)("a",{parentName:"p",href:"https://www.reddit.com/r/firecms/"},"https://www.reddit.com/r/firecms/")," or directly at ",(0,i.kt)("a",{parentName:"p",href:"mailto:hello@camberi.com"},"hello@camberi.com")," \ud83d\ude0a"))),(0,i.kt)("h3",{id:"example-custom-app"},"Example custom app"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'import React from "react";\n\nimport { GoogleAuthProvider } from "firebase/auth";\nimport { CssBaseline, ThemeProvider } from "@mui/material";\nimport { BrowserRouter as Router } from "react-router-dom";\n\nimport "typeface-rubik";\nimport "typeface-space-mono";\n\nimport {\n    AuthDelegate,\n    Authenticator,\n    buildCollection,\n    buildSchema,\n    CircularProgressCenter,\n    createCMSDefaultTheme,\n    FirebaseLoginView,\n    FireCMS,\n    NavigationBuilder,\n    NavigationBuilderProps,\n    NavigationRoutes,\n    Scaffold,\n    SideEntityDialogs,\n    useFirebaseAuthDelegate,\n    useFirebaseStorageSource,\n    useFirestoreDataSource,\n    useInitialiseFirebase\n} from "@camberi/firecms";\n\nimport { firebaseConfig } from "./firebase_config";\n\nconst DEFAULT_SIGN_IN_OPTIONS = [\n    GoogleAuthProvider.PROVIDER_ID\n];\n\nconst productSchema = buildSchema({\n    name: "Product",\n    properties: {\n        name: {\n            title: "Name",\n            validation: { required: true },\n            dataType: "string"\n        },\n        price: {\n            title: "Price",\n            validation: {\n                required: true,\n                requiredMessage: "You must set a price between 0 and 1000",\n                min: 0,\n                max: 1000\n            },\n            description: "Price with range validation",\n            dataType: "number"\n        },\n        status: {\n            title: "Status",\n            validation: { required: true },\n            dataType: "string",\n            description: "Should this product be visible in the website",\n            longDescription: "Example of a long description hidden under a tooltip. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin quis bibendum turpis. Sed scelerisque ligula nec nisi pellentesque, eget viverra lorem facilisis. Praesent a lectus ac ipsum tincidunt posuere vitae non risus. In eu feugiat massa. Sed eu est non velit facilisis facilisis vitae eget ante. Nunc ut malesuada erat. Nullam sagittis bibendum porta. Maecenas vitae interdum sapien, ut aliquet risus. Donec aliquet, turpis finibus aliquet bibendum, tellus dui porttitor quam, quis pellentesque tellus libero non urna. Vestibulum maximus pharetra congue. Suspendisse aliquam congue quam, sed bibendum turpis. Aliquam eu enim ligula. Nam vel magna ut urna cursus sagittis. Suspendisse a nisi ac justo ornare tempor vel eu eros.",\n            config: {\n                enumValues: {\n                    private: "Private",\n                    public: "Public"\n                }\n            }\n        }\n    }\n});\n\n/**\n * This is an example of how to use the components provided by FireCMS for\n * a better customisation.\n */\nexport function CustomCMSApp() {\n\n    const navigation: NavigationBuilder = ({ user }: NavigationBuilderProps) => ({\n        collections: [\n            buildCollection({\n                path: "products",\n                schema: productSchema,\n                name: "Products",\n                permissions: ({ user }) => ({\n                    edit: true,\n                    create: true,\n                    delete: true\n                })\n            })\n        ]\n    });\n\n    const myAuthenticator: Authenticator = ({ user }) => {\n        console.log("Allowing access to", user?.email);\n        return true;\n    };\n\n    const {\n        firebaseApp,\n        firebaseConfigLoading,\n        configError,\n        firebaseConfigError\n    } = useInitialiseFirebase({ firebaseConfig });\n\n    const authDelegate: AuthDelegate = useFirebaseAuthDelegate({\n        firebaseApp,\n    });\n\n    const dataSource = useFirestoreDataSource({\n        firebaseApp: firebaseApp\n        // You can add your `FirestoreTextSearchController` here\n    });\n    const storageSource = useFirebaseStorageSource({ firebaseApp: firebaseApp });\n\n    if (configError) {\n        return <div> {configError} </div>;\n    }\n\n    if (firebaseConfigError) {\n        return <div>\n            It seems like the provided Firebase config is not correct. If you\n            are using the credentials provided automatically by Firebase\n            Hosting, make sure you link your Firebase app to Firebase\n            Hosting.\n        </div>;\n    }\n\n    if (firebaseConfigLoading || !firebaseApp) {\n        return <CircularProgressCenter/>;\n    }\n\n    return (\n        <Router>\n            <FireCMS navigation={navigation}\n                     authentication={myAuthenticator}\n                     authDelegate={authDelegate}\n                     dataSource={dataSource}\n                     storageSource={storageSource}\n                     entityLinkBuilder={({ entity }) => `https://console.firebase.google.com/project/${firebaseApp.options.projectId}/firestore/data/${entity.path}/${entity.id}`}\n            >\n                {({ context, mode, loading }) => {\n\n                    const theme = createCMSDefaultTheme({ mode });\n\n                    let component;\n                    if (loading) {\n                        component = <CircularProgressCenter/>;\n                    } else if (!context.authController.canAccessMainView) {\n                        component = (\n                            <FirebaseLoginView\n                                skipLoginButtonEnabled={false}\n                                signInOptions={DEFAULT_SIGN_IN_OPTIONS}\n                                firebaseApp={firebaseApp}\n                                authDelegate={authDelegate}/>\n                        );\n                    } else {\n                        component = (\n                            <Scaffold name={"My Online Shop"}>\n                                <NavigationRoutes/>\n                                <SideEntityDialogs/>\n                            </Scaffold>\n                        );\n                    }\n\n                    return (\n                        <ThemeProvider theme={theme}>\n                            <CssBaseline/>\n                            {component}\n                        </ThemeProvider>\n                    );\n                }}\n            </FireCMS>\n        </Router>\n    );\n\n}\n')))}m.isMDXComponent=!0}}]);